class D extends HTMLElement{static tagName="is-land";static prefix="is-land--";static attr={autoInitType:"autoinit",import:"import",template:"data-island",ready:"ready",defer:"defer-hydration"};static onceCache=new Map;static fallback={":not(:defined):not([defer-hydration])":(g,j,z)=>{let B=document.createElement(z+j.localName);for(let H of j.getAttributeNames())B.setAttribute(H,j.getAttribute(H));let E=j.shadowRoot;if(!E){let H=j.querySelector(":scope > template:is([shadowrootmode], [shadowroot])");if(H)E=j.attachShadow({mode:"open"}),E.appendChild(H.content.cloneNode(!0))}if(E)B.attachShadow({mode:E.mode}).append(...E.childNodes);return B.append(...j.childNodes),j.replaceWith(B),g.then(()=>{if(B.shadowRoot)j.shadowRoot.append(...B.shadowRoot.childNodes);j.append(...B.childNodes),B.replaceWith(j)})}};static autoinit={"petite-vue":function(g){g.createApp().mount(this)},vue:function(g){g.createApp().mount(this)},svelte:function(g){new g.default({target:this})},"svelte-ssr":function(g){new g.default({target:this,hydrate:!0})},preact:function(g){g.default(this)}};constructor(){super();this.ready=new Promise((g)=>{this.readyResolve=g})}static getParents(g,j=!1){let z=[];while(g){if(g.matches&&g.matches(D.tagName)){if(j&&g===j)break;if(G.hasConditions(g))z.push(g)}g=g.parentNode}return z}static async ready(g){let j=D.getParents(g);if(j.length===0)return;let z=await Promise.all(j.map((B)=>B.wait()));if(z.length)return z[0]}forceFallback(){if(window.Island)Object.assign(D.fallback,window.Island.fallback);for(let g in D.fallback){let j=Array.from(this.querySelectorAll(g)).reverse();for(let z of j){if(!z.isConnected||z.localName===D.tagName)continue;let B=D.ready(z);D.fallback[g](B,z,D.prefix)}}}wait(){return this.ready}async connectedCallback(){if(G.hasConditions(this))this.forceFallback();await this.hydrate()}getTemplates(){return this.querySelectorAll(`template[${D.attr.template}]`)}replaceTemplates(g){for(let j of g){if(D.getParents(j,this).length>0)continue;let z=j.getAttribute(D.attr.template);if(z==="replace"){let B=Array.from(this.childNodes);for(let E of B)this.removeChild(E);this.appendChild(j.content);break}else{let B=j.innerHTML;if(z==="once"&&B){if(D.onceCache.has(B)){j.remove();return}D.onceCache.set(B,!0)}j.replaceWith(j.content)}}}async hydrate(){let g=[];if(this.parentNode)g.push(D.ready(this.parentNode));let j=G.getConditions(this);for(let E in j)if(G.map[E])g.push(G.map[E](j[E],this));await Promise.all(g),this.replaceTemplates(this.getTemplates());let z,B=this.getAttribute(D.attr.import);if(B)z=await import(B);if(z){let E=D.autoinit[this.getAttribute(D.attr.autoInitType)||B];if(E)await E.call(this,z)}this.readyResolve(),this.setAttribute(D.attr.ready,""),this.querySelectorAll(`[${D.attr.defer}]`).forEach((E)=>E.removeAttribute(D.attr.defer))}}class G{static map={visible:G.visible,idle:G.idle,interaction:G.interaction,media:G.media,"save-data":G.saveData};static hasConditions(g){return Object.keys(G.getConditions(g)).length>0}static getConditions(g){let j={};for(let z of Object.keys(G.map))if(g.hasAttribute(`on:${z}`))j[z]=g.getAttribute(`on:${z}`);return j}static visible(g,j){if(!("IntersectionObserver"in window))return;return new Promise((z)=>{let B=new IntersectionObserver((E)=>{let[H]=E;if(H.isIntersecting)B.unobserve(H.target),z()});B.observe(j)})}static idle(){let g=new Promise((j)=>{if(document.readyState!=="complete")window.addEventListener("load",()=>j(),{once:!0});else j()});if(!("requestIdleCallback"in window))return g;return Promise.all([new Promise((j)=>{requestIdleCallback(()=>{j()})}),g])}static interaction(g,j){let z=["click","touchstart"];if(g)z=(g||"").split(",").map((B)=>B.trim());return new Promise((B)=>{function E(H){B();for(let J of z)j.removeEventListener(J,E)}for(let H of z)j.addEventListener(H,E,{once:!0})})}static media(g){let j={matches:!0};if(g&&"matchMedia"in window)j=window.matchMedia(g);if(j.matches)return;return new Promise((z)=>{j.addListener((B)=>{if(B.matches)z()})})}static saveData(g){if(!("connection"in navigator)||navigator.connection.saveData===(g!=="false"))return Promise.resolve();return new Promise(()=>{})}}if("customElements"in window)window.customElements.define(D.tagName,D),window.Island=D;var K=D.ready;